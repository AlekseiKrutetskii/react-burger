(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{112:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__AKixE"}},121:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(38),s=n.n(c),i=(n(121),n(4)),o=n(80),l=n.n(o),d=n(3),u=n(39),p=n.n(u),m=n(9),j=n(6),b=n(0),f=function(){var e=!!Object(m.i)({path:"/",exact:!0}),t=!!Object(m.i)("/feed"),n=!!Object(m.i)("/profile");return Object(b.jsxs)("header",{className:"pt-4 pb-4 ".concat(p.a.header),children:[Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{className:p.a.nav,children:[Object(b.jsx)("li",{className:"mr-2",children:Object(b.jsxs)(j.a,{"data-testid":"mainpage",to:"/",className:"pl-5 pr-5 ".concat(p.a["nav-item"]),children:[Object(b.jsx)(d.BurgerIcon,{type:e?"primary":"secondary"}),Object(b.jsx)("span",{className:"pl-2 text text_type_main-default ".concat(e?"":" text_color_inactive"),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)(j.a,{to:"/feed/",className:"pl-5 pr-5 ".concat(p.a["nav-item"]),children:[Object(b.jsx)(d.ListIcon,{type:t?"primary":"secondary"}),Object(b.jsx)("span",{className:"pl-2 text text_type_main-default ".concat(t?"":" text_color_inactive"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]})}),Object(b.jsx)(j.a,{to:"/",children:Object(b.jsx)(d.Logo,{})}),Object(b.jsxs)(j.a,{to:"/profile",className:"pl-5 pr-5 ".concat(p.a["nav-item"]),children:[Object(b.jsx)(d.ProfileIcon,{type:n?"primary":"secondary"}),Object(b.jsx)("span",{className:"pl-2 text text_type_main-default ".concat(n?"":" text_color_inactive"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})},x=n(28),_=n.n(x),O=n(32),h=O.e,g=function(){return Object(O.d)()},y=n(82),v=n.n(y),N=n(216),w=function(e){var t=e.item,n=Object(m.g)(),a=h((function(e){return e.constructors.count})),r=a.filter((function(e){return e._id===t._id}))[0],c=r?r.qty:0,s=Object(N.a)({type:"items",item:t,collect:function(e){return{isDragging:!!e.isDragging()}}}),o=Object(i.a)(s,2),l=o[0].isDragging,u=o[1];return Object(b.jsx)("div",{ref:u,style:{opacity:l?.5:1,cursor:"move"},className:"mb-8 ".concat(v.a.item),"data-item":JSON.stringify(t),children:Object(b.jsxs)(j.a,{className:v.a.link,to:{pathname:"/ingredients/".concat(t._id),state:{background:n}},children:[c>0&&Object(b.jsx)(d.Counter,{count:c,size:"default"}),Object(b.jsx)("img",{className:"pl-4 pr-4 mb-1",src:t.image,alt:t.name}),Object(b.jsxs)("span",{className:"text text_type_digits-default mb-1 price",children:[t.price," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("span",{className:"text text_type_main-default",children:t.name})]},t._id)})},k=function(e){e.handleOpenModal;var t=h((function(e){return e.ingredients.entities})),n=Object(a.useState)("one"),r=Object(i.a)(n,2),c=r[0],s=r[1],o=Object(a.useRef)(null),l=Object(a.useRef)(null),u=Object(a.useRef)(null),p=Object(a.useRef)(null),m=null!=l.current?l.current.offsetTop:0;return Object(b.jsxs)("section",{className:"pt-10 mr-8 ".concat(_.a.ingredients),children:[Object(b.jsx)("p",{className:"text text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsxs)("div",{className:"mb-10 ".concat(_.a.tab),children:[Object(b.jsx)(d.Tab,{value:"one",active:"one"===c,onClick:s,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(d.Tab,{value:"two",active:"two"===c,onClick:s,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)(d.Tab,{value:"three",active:"three"===c,onClick:s,children:"\u0421\u043e\u0443\u0441\u044b"})]}),Object(b.jsxs)("div",{className:_.a["item-wrap"],onScroll:function(){var e=null!=o.current?o.current.scrollTop:0,t=null!=l.current?l.current.offsetTop:0,n=null!=u.current?u.current.offsetTop:0,a=null!=p.current?p.current.offsetTop:0;Math.abs(a-e-m)<Math.abs(n-e-m)?s("three"):Math.abs(n-e-m)<Math.abs(t-e-m)?s("two"):s("one")},ref:o,children:[Object(b.jsxs)("div",{className:_.a.items,ref:l,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)("div",{"data-testid":"ingredients",className:"mb-10 pl-4 pr-4 ".concat(_.a["item-subwrap"]),children:t.filter((function(e){return"bun"===e.type})).map((function(e){return Object(b.jsx)(w,{item:e},e._id)}))})]}),Object(b.jsxs)("div",{className:_.a.items,ref:u,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)("div",{className:"mb-10 pl-4 pr-4 ".concat(_.a["item-subwrap"]),children:t.filter((function(e){return"main"===e.type})).map((function(e){return Object(b.jsx)(w,{item:e},e._id)}))})]}),Object(b.jsxs)("div",{className:_.a.items,ref:p,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(b.jsx)("div",{className:"mb-10 pl-4 pr-4 ".concat(_.a["item-subwrap"]),children:t.filter((function(e){return"sauce"===e.type})).map((function(e){return Object(b.jsx)(w,{item:e},e._id)}))})]})]})]})},C=n(27),I=n(47),S=n.n(I),T=n(15),E=Object(T.a)(),M=n(217),R=n(11),z=Object(R.d)({name:"constructors",initialState:{items:[],count:[]},reducers:{add:function(e,t){var n=e.items.map((function(e){return e._id}));"bun"===t.payload.type?n.includes(t.payload._id)||(e.items.filter((function(e){return"bun"===e.type})).map((function(t){return e.count=e.count.filter((function(e){return e._id!==t._id}))})),e.count.push({_id:t.payload._id,qty:2}),e.items=e.items.filter((function(e){return"bun"!==e.type})),e.items.unshift(t.payload)):(e.count.filter((function(e){return e._id===t.payload._id})).length>0?e.count=e.count.map((function(e){return e._id===t.payload._id?Object(C.a)(Object(C.a)({},e),{},{qty:++e.qty}):e})):e.count.push({_id:t.payload._id,qty:1}),e.items.push(t.payload))},del:function(e,t){e.count=e.count.map((function(n){return n._id===t.payload.item._id?(e.items=e.items.filter((function(e){return e.customId!==t.payload.item.customId})),{_id:t.payload.item._id,qty:n.qty-1}):n}))},update:function(e,t){e.items=t.payload},clear:function(e){console.log("clear"),e.items=[],e.count=[]}}}),B=z.actions,P=(B.add,B.del,B.update,B.clear,z.actions,z.reducer,function(e){var t=e.item,n=e.index,r=e.id,c=e.moveConstructorItem,s=g(),o=Object(a.useRef)(null),l=Object(M.a)({accept:"citem",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(o.current){var r=e.index,s=n;if(r!==s){var i=null===(a=o.current)||void 0===a?void 0:a.getBoundingClientRect(),l=(i.bottom-i.top)/2,d=t.getClientOffset(),u=d?d.y-i.top:0;r<s&&u<l||r>s&&u>l||(c(r,s),e.index=s)}}}}),u=Object(i.a)(l,2),p=u[0].handlerId,m=u[1],j=Object(N.a)({type:"citem",item:function(){return{id:r,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),f=Object(i.a)(j,2),x=f[0].isDragging?0:1;return(0,f[1])(m(o)),Object(b.jsxs)("li",{ref:o,style:{opacity:x},"data-handler-id":p,className:"mb-4","data-modaltype":"Ingredients","data-item":JSON.stringify(t),children:[Object(b.jsx)(d.DragIcon,{type:"primary"}),Object(b.jsx)(d.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return function(e){s(z.actions.del({item:e}))}(t)}})]},t.customId)}),D=n(111),L=n.n(D),H=function(e){var t=e.handleOpenModal,n=Object(m.g)(),r=g(),c=h((function(e){return e.constructors.items})),s=c.reduce((function(e,t,n,a){return e+t.price*("bun"===t.type?2:1)}),0),o=c.filter((function(e){return"bun"===e.type})).length,l=Object(M.a)((function(){return{accept:"items",drop:function(e){var t="id_"+Math.random();r(z.actions.add(Object(C.a)(Object(C.a)({},e),{},{customId:t})))}}})),u=Object(i.a)(l,2)[1],p=Object(a.useCallback)((function(e,t){var n=c[e];r(z.actions.update(L()(c,{$splice:[[e,1],[t,0,n]]})))}),[c,r]),j=h((function(e){return e.user.loading})),f=h((function(e){return!!e.user.data}));return"loading"===j?null:Object(b.jsxs)("section",{"data-testid":"constructor",className:"pt-25 ".concat(S.a.ingredients),ref:u,children:[c.filter((function(e){return"bun"===e.type})).map((function(e){return Object(b.jsx)("div",{className:"ml-8 mb-4",children:Object(b.jsx)(d.ConstructorElement,{type:"top",isLocked:!0,text:e.name+" (\u0432\u0435\u0440\u0445)",price:e.price,thumbnail:e.image})},e.customId+"top")})),Object(b.jsx)("ul",{className:"".concat(S.a["item-wrap"]),children:c.filter((function(e){return"bun"!==e.type})).map((function(e,t){return Object(b.jsx)(P,{item:e,index:t+o,id:e.customId,moveConstructorItem:p},e.customId)}))}),c.filter((function(e){return"bun"===e.type})).map((function(e){return Object(b.jsx)("div",{className:"ml-8 mt-4",children:Object(b.jsx)(d.ConstructorElement,{type:"bottom",isLocked:!0,text:e.name+" (\u043d\u0438\u0437)",price:e.price,thumbnail:e.image})},e.customId+"bottom")})),Object(b.jsxs)("div",{className:"".concat(S.a.total," mt-10"),children:[Object(b.jsxs)("span",{className:"".concat(S.a["total-price"]," text text_type_digits-medium mr-10"),children:[s," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]}),f?Object(b.jsx)(d.Button,{"data-testid":"authprofile",type:"primary",size:"large",onClick:t,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}):Object(b.jsx)(d.Button,{"data-testid":"profile",type:"primary",size:"large",onClick:function(){E.push("/login",{from:n})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},J=n(112),F=n.n(J),q=function(e){var t=e.handleCloseModal,n=e.children;return Object(b.jsx)("div",{className:F.a.overlay,onClick:t,children:n})},U=n(84),A=n.n(U),G=function(e){var t=e.handleCloseModal,n=e.children,a=document.getElementById("react-modals");return a&&s.a.createPortal(Object(b.jsx)(q,{handleCloseModal:t,children:Object(b.jsxs)("div",{onClick:function(e){e.stopPropagation()},className:A.a.modal+" pt-10",children:[Object(b.jsx)("header",{className:"mr-10 ml-10 text text_type_main-medium "+A.a.header,children:Object(b.jsx)(d.CloseIcon,{type:"primary",onClick:t})}),Object(b.jsx)("section",{children:n})]})}),a)},K=n(29),W=n.n(K),Z=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],r=t[1],c=h((function(e){return e.ingredients.entities})),s=h((function(e){return e.ingredients.loading})),o=Object(m.h)().id;return Object(a.useEffect)((function(){c.filter((function(e){return e._id===o})).map((function(e){return r(e)}))}),[c,o]),"loading"!==s&&n?Object(b.jsxs)("div",{children:[Object(b.jsx)("header",{className:"mr-10 ml-10 text text_type_main-medium "+W.a.header,children:Object(b.jsx)("span",{children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"})}),Object(b.jsx)("section",{children:Object(b.jsxs)("div",{className:W.a.wrap,children:[Object(b.jsx)("img",{className:W.a.img+" pl-4 pr-4 mb-4",src:n.image_large,alt:n.name}),Object(b.jsx)("span",{className:W.a.name+" text text_type_main-medium mb-8",children:n.name}),Object(b.jsxs)("ul",{className:W.a.list+" mb-15",children:[Object(b.jsxs)("li",{className:W.a.item+" text text_type_main-default text_color_inactive",children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",Object(b.jsx)("br",{}),Object(b.jsx)("span",{className:"text_type_digits-default",children:n.calories})]}),Object(b.jsxs)("li",{className:W.a.item+" text text_type_main-default text_color_inactive ml-5",children:["\u0411\u0435\u043b\u043a\u0438, \u0433",Object(b.jsx)("br",{}),Object(b.jsx)("span",{className:"text_type_digits-default",children:n.proteins})]}),Object(b.jsxs)("li",{className:W.a.item+" text text_type_main-default text_color_inactive ml-5",children:["\u0416\u0438\u0440\u044b, \u0433",Object(b.jsx)("br",{}),Object(b.jsx)("span",{className:"text_type_digits-default",children:n.fat})]}),Object(b.jsxs)("li",{className:W.a.item+" text text_type_main-default text_color_inactive ml-5",children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",Object(b.jsx)("br",{}),Object(b.jsx)("span",{className:"text_type_digits-default",children:n.carbohydrates})]})]})]})})]}):null},Y=n(56),V=n.n(Y),X=function(){var e=g(),t=h((function(e){return e.order.order})),n="----";return t&&void 0!==t.order&&(n=t.order.number.toString()),Object(a.useEffect)((function(){return function(){e(z.actions.clear())}}),[e]),Object(b.jsxs)("div",{className:V.a.wrap,children:[Object(b.jsx)("span",{"data-testid":"number",className:"text text_type_digits-large",children:n}),Object(b.jsx)("span",{className:"text text_type_main-default mt-8 mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)(d.CheckMarkIcon,{type:"primary"}),Object(b.jsx)("span",{className:V.a.text+" text text_type_main-default mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("span",{className:V.a.text+" text text_type_main-default text_color_inactive mt-2 mb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0440\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},$=Object(R.d)({name:"current",initialState:{cur:null},reducers:{add:function(e,t){e.cur=t.payload},del:function(e){e.cur=null}}}),Q=$.actions,ee=(Q.add,Q.del,$.reducer,n(48)),te=n.n(ee),ne=n(12),ae=n.n(ne),re=n(20),ce=n(14),se="https://norma.nomoreparties.space/api/",ie=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},oe=function(){var e=Object(re.a)(ae.a.mark((function e(t,n){var a,r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return a=e.sent,e.next=6,ie(a);case 6:case 23:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0 instanceof Error&&"jwt expired"===e.t0.message)){e.next=26;break}return e.next=14,fetch(se+"auth/token",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return ie(e)}));case 14:return r=e.sent,localStorage.setItem("refreshToken",r.refreshToken),pe("accessToken",r.accessToken),n.headers.authorization=r.accessToken,e.next=20,fetch(t,n);case 20:return c=e.sent,e.next=23,ie(c);case 26:return e.abrupt("return",Promise.reject(e.t0));case 27:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(re.a)(ae.a.mark((function e(t,n,a){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n||""===a){e.next=5;break}return localStorage.setItem("forgot","yes"),e.next=5,fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}).then((function(e){return ie(e)})).then((function(e){console.log(e.success?"ok":"error"),E.push("/reset-password")})).catch((function(){return console.log("some error")}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),de=function(){var e=Object(re.a)(ae.a.mark((function e(t,n,a){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch(se+"password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n,token:a})}).then((function(e){return ie(e)})).then((function(e){console.log(e),localStorage.removeItem("forgot"),E.push("/login")})).catch((function(){return console.log("some error")}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function ue(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object(C.a)({path:"/"},n);var a=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var r in n){a+="; "+r;var c=n[r];!0!==c&&(a+="="+c)}document.cookie=a}var me="user",je=Object(R.c)("".concat(me,"/registerUser"),function(){var e=Object(re.a)(ae.a.mark((function e(t,n){var a,r,c;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,fetch(se+"auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,a(Object(ce.d)("/login")),c.success&&localStorage.setItem("refreshToken",c.refreshToken),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),be=Object(R.c)("".concat(me,"/loginUser"),function(){var e=Object(re.a)(ae.a.mark((function e(t,n){var a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,e.next=3,fetch(se+"auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 3:return a=e.sent,e.next=6,a.json();case 6:return(r=e.sent).success&&localStorage.setItem("refreshToken",r.refreshToken),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),fe=Object(R.c)("".concat(me,"/logoutUser"),function(){var e=Object(re.a)(ae.a.mark((function e(t,n){var a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,e.next=3,fetch(se+"auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),xe=Object(R.c)("".concat(me,"/getUser"),Object(re.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue("accessToken")){e.next=4;break}return t=oe(se+"auth/user",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ue("accessToken")}}),e.abrupt("return",t);case 4:return e.abrupt("return",Promise.reject("\u041d\u0435\u0442 \u0442\u043e\u043a\u0435\u043d\u0430"));case 5:case"end":return e.stop()}}),e)})))),_e=Object(R.d)({name:"user",initialState:{data:null,loading:"idle"},reducers:{setUserData:function(e,t){e.data=t.payload}},extraReducers:function(e){e.addCase(je.fulfilled,(function(e,t){e.data=t.payload.user,void 0!==t.payload.accessToken&&pe("accessToken",t.payload.accessToken.split("Bearer ")[1])})),e.addCase(be.fulfilled,(function(e,t){console.log(t.payload),e.data=t.payload.user,void 0!==t.payload.accessToken&&pe("accessToken",t.payload.accessToken.split("Bearer ")[1])})),e.addCase(xe.pending,(function(e){e.loading="loading"})),e.addCase(xe.fulfilled,(function(e,t){e.data=t.payload.user,e.loading="idle"})),e.addCase(xe.rejected,(function(e){e.loading="idle"})),e.addCase(fe.pending,(function(e){e.loading="loading"})),e.addCase(fe.fulfilled,(function(e,t){t.payload.success&&(localStorage.removeItem("refreshToken"),pe("accessToken","",{"max-age":-1}),e.data=null),e.loading="idle"})),e.addCase(fe.rejected,(function(e){e.loading="idle"}))}}),Oe=_e.actions,he=(_e.actions,Oe.setUserData),ge=(_e.reducer,function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)({type:"password",icon:"ShowIcon"}),p=Object(i.a)(u,2),f=p[0],x=p[1],_=Object(a.useRef)(null),O=Object(a.useRef)(null),y=Object(m.g)(),v=g(),N=h((function(e){return e.user.loading})),w=h((function(e){return!!e.user.data}));return"loading"===N?null:w?Object(b.jsx)(m.a,{to:y.state?y.state.from:"/"}):Object(b.jsxs)("div",{className:te.a.wrap+" pt-20",children:[Object(b.jsx)("p",{className:"text text_type_main-medium pb-10",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),null!==_.current&&null!==O.current){var t=_.current.value,n=O.current.value;v(be(JSON.stringify({email:t,password:n})))}},className:te.a.form,children:[Object(b.jsx)(d.Input,{type:"text",placeholder:"E-mail",onChange:function(e){return r(e.target.value)},value:n,name:"email",ref:_,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Input,{icon:f.icon,type:f.type,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return l(e.target.value)},onIconClick:function(){"text"===f.type?x({type:"password",icon:"ShowIcon"}):x({type:"text",icon:"HideIcon"})},value:o,name:"password",ref:O,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Button,{"data-testid":"singin",type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(b.jsxs)("p",{className:"text text_type_main-default pt-20",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(b.jsx)(j.a,{className:te.a.link,to:{pathname:"/register/"},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsxs)("p",{className:"text text_type_main-default",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(b.jsx)(j.a,{className:te.a.link,to:{pathname:"/forgot-password/"},children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})}),ye=n(57),ve=n.n(ye);function Ne(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(""),p=Object(i.a)(u,2),f=p[0],x=p[1],_=Object(a.useState)({type:"password",icon:"ShowIcon"}),O=Object(i.a)(_,2),y=O[0],v=O[1],N=Object(a.useRef)(null),w=Object(a.useRef)(null),k=Object(a.useRef)(null),C=g(),I=h((function(e){return e.user.loading})),S=h((function(e){return!!e.user.data}));return"loading"===I?null:S?Object(b.jsx)(m.a,{to:"/"}):Object(b.jsxs)("div",{className:ve.a.wrap+" pt-20",children:[Object(b.jsx)("p",{className:"text text_type_main-medium pb-10",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),C(je(JSON.stringify({email:null!==w.current?w.current.value:"",password:null!==k.current?k.current.value:"",name:null!==N.current?N.current.value:""})))},className:ve.a.wrap,children:[Object(b.jsx)(d.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return r(e.target.value)},value:n,name:"name",ref:N,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Input,{type:"text",placeholder:"E-mail",onChange:function(e){return l(e.target.value)},value:o,name:"email",ref:w,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Input,{icon:y.icon,type:y.type,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return x(e.target.value)},onIconClick:function(){"text"===y.type?v({type:"password",icon:"ShowIcon"}):v({type:"text",icon:"HideIcon"})},value:f,name:"password",ref:k,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsxs)("p",{className:"text text_type_main-default pt-20",children:["\u0423\u0436\u0435 \u0445\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(b.jsx)(j.a,{className:ve.a.link,to:{pathname:"/login/"},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var we=n(58),ke=n.n(we);function Ce(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(!1),p=Object(i.a)(u,2),f=p[0],x=p[1],_=Object(a.useRef)(null),O=function(e){var t=e.target.value;/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?(l(""),x(!1)):(l("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 e-mail"),x(!0))},g=h((function(e){return e.user.loading})),y=h((function(e){return!!e.user.data}));return"loading"===g?null:y?Object(b.jsx)(m.a,{to:"/"}):Object(b.jsxs)("div",{className:ke.a.wrap+" pt-20",children:[Object(b.jsx)("p",{className:"text text_type_main-medium pb-10",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsxs)("form",{onSubmit:function(e){return le(e,f,n)},className:ke.a.wrap,children:[Object(b.jsx)(d.Input,{type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",error:f,errorText:o,onChange:function(e){r(e.target.value),O(e)},onBlur:O,value:n,name:"email",ref:_,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(b.jsxs)("p",{className:"text text_type_main-default pt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(b.jsx)(j.a,{className:ke.a.link,to:{pathname:"/login/"},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var Ie,Se,Te=n(59),Ee=n.n(Te),Me=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)({type:"password",icon:"ShowIcon"}),p=Object(i.a)(u,2),f=p[0],x=p[1],_=Object(a.useRef)(null),O=Object(a.useRef)(null),g=h((function(e){return e.user.loading})),y=h((function(e){return!!e.user.data})),v=localStorage.getItem("forgot");return"loading"===g?null:y||"yes"!==v?Object(b.jsx)(m.a,{to:"/"}):Object(b.jsxs)("div",{className:Ee.a.wrap+" pt-20",children:[Object(b.jsx)("p",{className:"text text_type_main-medium pb-10",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsxs)("form",{onSubmit:function(e){return de(e,o,n)},className:Ee.a.wrap,children:[Object(b.jsx)(d.Input,{icon:f.icon,type:f.type,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return l(e.target.value)},onIconClick:function(){"text"===f.type?x({type:"password",icon:"ShowIcon"}):x({type:"text",icon:"HideIcon"})},value:o,name:"password",ref:O,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:function(e){return r(e.target.value)},value:n,name:"code",ref:_,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(b.jsxs)("p",{className:"text text_type_main-default pt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(b.jsx)(j.a,{className:Ee.a.link,to:{pathname:"/login/"},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Re=n(24),ze=n.n(Re),Be=n(115),Pe=["children"],De=function(e){var t=e.children,n=Object(Be.a)(e,Pe),a=h((function(e){return e.user.loading})),r=h((function(e){return!!e.user.data}));return"loading"===a?null:Object(b.jsx)(m.b,Object(C.a)(Object(C.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(b.jsx)(m.a,{to:{pathname:"/login",state:{from:n}}})}}))},Le=n(49),He=n.n(Le),Je=n(30),Fe=n.n(Je);!function(e){e.CONNECTING="CONNECTING...",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Ie||(Ie={})),function(e){e.created="\u0421\u043e\u0437\u0434\u0430\u043d",e.pending="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",e.done="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"}(Se||(Se={}));var qe=n(35),Ue=n.n(qe),Ae=(n(106),function(e){var t=e.item,n=0,a=Object(m.g)(),r=h((function(e){return e.ingredients.entities}));return Ue.a.locale("RU"),Object(b.jsx)("div",{className:"pl-6 pt-6 pb-6 mb-6 ".concat(Fe.a.item),"data-item":JSON.stringify(t),children:Object(b.jsxs)(j.a,{className:Fe.a.link,to:{pathname:"".concat(a.pathname).concat(t._id),state:{background:a}},children:[Object(b.jsxs)("div",{className:"mb-6 pr-6 ".concat(Fe.a.block),children:[Object(b.jsxs)("span",{className:"text text_type_digits-default",children:["#",t.number]}),Object(b.jsx)("span",{className:"text text_type_main-default text_color_inactive ".concat(Fe.a.date),children:Ue()(t.createdAt).format("HH:mm:ss d MMM")})]}),Object(b.jsx)("span",{className:"mb-2 text text_type_main-medium",children:t.name}),Object(b.jsx)("span",{className:"mb-6 text text_type_main-default ".concat("done"===t.status?Fe.a.done:""),children:Se[t.status]}),Object(b.jsxs)("div",{className:"pr-6 ".concat(Fe.a.block),children:[Object(b.jsx)("div",{className:"pl-3 ".concat(Fe.a.wrap),children:t.ingredients.map((function(e){return r.filter((function(t){return t._id===e})).map((function(e){return n+=e.price*("bun"===e.type?2:1),Object(b.jsx)("div",{className:Fe.a.icon,children:Object(b.jsx)("img",{className:"pl-4 pr-4 mb-1 ".concat(Fe.a.image),src:e.image,alt:e.name})},e._id)}))}))}),Object(b.jsxs)("span",{className:"text text_type_digits-default mb-1 price",children:[n," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]},t._id)})}),Ge=function(){var e=h((function(e){return e.orders.orders}));return Object(b.jsx)("section",{className:"".concat(He.a.orders),children:Object(b.jsx)("div",{className:He.a["item-wrap"],children:Object(b.jsx)("div",{className:He.a.items,children:Object(b.jsx)("div",{className:"mb-10 pr-4 ".concat(He.a["item-subwrap"]),children:null===e||void 0===e?void 0:e.map((function(e){return Object(b.jsx)(Ae,{item:e},e._id)}))})})})})},Ke=Object(R.b)("ORDERS_LIST_CONNECT"),We=Object(R.b)("ORDERS_LIST_DISCONNECT");function Ze(){var e=g();return Object(a.useEffect)((function(){return e(Ke("wss://norma.nomoreparties.space/orders?token="+ue("accessToken"))),function(){e(We())}}),[e]),Object(b.jsx)(Ge,{})}function Ye(){var e=h((function(e){return e.user.data})),t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(i.a)(s,2),l=o[0],u=o[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),x=f[0],_=f[1],O=Object(a.useState)({type:"password",icon:"ShowIcon"}),y=Object(i.a)(O,2),v=y[0],N=y[1],w=Object(a.useRef)(null),k=Object(a.useRef)(null),C=Object(a.useRef)(null),I=g(),S=Object(m.i)(),T=S.url,E=S.path;Object(a.useEffect)((function(){c(e?e.name:""),u(e?e.email:"")}),[e]);return Object(b.jsxs)("div",{className:ze.a.wrap+" pt-20",children:[Object(b.jsxs)("div",{className:ze.a.side,children:[Object(b.jsxs)("ul",{className:ze.a.nav,children:[Object(b.jsx)("li",{className:"mb-5",children:Object(b.jsx)(j.b,{className:ze.a.link+" text text_type_main-medium",exact:!0,activeClassName:ze.a.active,to:{pathname:T},children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(b.jsx)("li",{className:"mb-5",children:Object(b.jsx)(j.b,{className:ze.a.link+" text text_type_main-medium",activeClassName:ze.a.active,to:{pathname:"".concat(T,"/orders/")},children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(b.jsx)("li",{children:Object(b.jsx)(j.a,{className:ze.a.link+" text text_type_main-medium",onClick:function(){I(fe(JSON.stringify({token:localStorage.getItem("refreshToken")})))},to:"/login",children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(b.jsx)("div",{className:ze.a.page,children:Object(b.jsxs)(m.d,{children:[Object(b.jsx)(De,{path:"".concat(E,"/orders"),exact:!0,children:Object(b.jsx)(Ze,{})}),Object(b.jsx)(m.b,{path:"".concat(E),exact:!0,children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),oe(se+"auth/user",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ue("accessToken")},body:JSON.stringify({name:r,email:l,password:x})}).then((function(e){he(e.user)})).catch((function(){return console.log("some error")}))},className:ze.a.form+" pb-20",children:[Object(b.jsx)(d.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:function(e){return c(e.target.value)},value:r,name:"name",ref:w,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Input,{type:"text",placeholder:"E-mail",onChange:function(e){return u(e.target.value)},value:l,name:"email",ref:k,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsx)(d.Input,{icon:v.icon,type:v.type,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return _(e.target.value)},onIconClick:function(){"text"===v.type?N({type:"password",icon:"ShowIcon"}):N({type:"text",icon:"HideIcon"})},value:x,name:"password",ref:C,size:"default"}),Object(b.jsx)("br",{}),Object(b.jsxs)("p",{className:"text text_type_main-default",children:[Object(b.jsx)("span",{className:ze.a.button+" mr-10",onClick:function(){c(e?e.name:""),u(e?e.email:""),_("")},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(b.jsx)(d.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})]})})]})}var Ve=n(114),Xe=n(215),$e=Object(R.c)("order/sendOrder",function(){var e=Object(re.a)(ae.a.mark((function e(t){var n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ue("accessToken")){e.next=4;break}return n=oe(se+"orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ue("accessToken")},body:t}),e.abrupt("return",n);case 4:return e.abrupt("return",Promise.reject("\u041d\u0435\u0442 \u0442\u043e\u043a\u0435\u043d\u0430"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Qe=Object(R.d)({name:"order",initialState:{order:null,loading:"idle"},reducers:{},extraReducers:function(e){e.addCase($e.pending,(function(e){e.loading="loading"})),e.addCase($e.fulfilled,(function(e,t){e.order=t.payload,e.loading="idle"})),e.addCase($e.rejected,(function(e){e.loading="idle"}))}}),et=(Qe.reducer,Qe.actions,n(40)),tt=n.n(et);function nt(){var e,t,n=g(),r=h((function(e){return e.orders}));return Object(a.useEffect)((function(){return n(Ke("wss://norma.nomoreparties.space/orders/all")),function(){n(We())}}),[n]),Object(b.jsxs)("div",{className:"".concat(tt.a.flex),children:[Object(b.jsxs)("div",{className:"pt-10 mr-8 ".concat(tt.a.side),children:[Object(b.jsx)("p",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)(Ge,{})]}),Object(b.jsxs)("div",{className:"pt-10 ".concat(tt.a.flexc),children:[Object(b.jsxs)("div",{className:"".concat(tt.a.info),children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(b.jsx)("div",{className:"pt-6",children:null===(e=r.orders)||void 0===e?void 0:e.filter((function(e,t){return"done"===e.status&&t<10})).map((function(e){return Object(b.jsx)("div",{className:"mb-2 text text_type_digits-default ".concat(tt.a.done),children:e.number},e._id)}))})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"mb-6 text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(b.jsx)("div",{className:"pt-6",children:null===(t=r.orders)||void 0===t?void 0:t.filter((function(e){return"pending"===e.status})).map((function(e){return Object(b.jsx)("div",{className:"mb-2 text text_type_digits-default",children:e.number},e._id)}))})]})]}),Object(b.jsx)("span",{className:"mt-15 text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(b.jsx)("span",{className:"text text_type_digits-large",children:r.total}),Object(b.jsx)("span",{className:"mt-15 text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(b.jsx)("span",{className:"text text_type_digits-large",children:r.totalToday})]})]})}var at,rt=n(25),ct=n.n(rt),st=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=h((function(e){return e.ingredients.loading})),s=h((function(e){return e.orders.orders})),o=h((function(e){return e.ingredients.entities})),l=Object(m.h)().id,u=0;Ue.a.locale("RU");var p=g();return Object(a.useEffect)((function(){return p(Ke("wss://norma.nomoreparties.space/orders/all")),function(){p(We())}}),[p]),Object(a.useEffect)((function(){null===s||void 0===s||s.filter((function(e){return e._id===l})).map((function(e){return r(e)}))}),[s,l]),"loading"!==c&&n?Object(b.jsx)("div",{className:ct.a.wrap,children:Object(b.jsxs)("section",{className:"pt-4 pl-4 pr-4 pb-4  ".concat(ct.a.order),children:[Object(b.jsxs)("span",{className:"text text_type_digits-default mb-10 ".concat(ct.a.center),children:["#",n.number]}),Object(b.jsx)("span",{className:"mb-2 text text_type_main-medium mb-3",children:n.name}),Object(b.jsx)("span",{className:"mb-6 text text_type_main-default mb-15 ".concat("done"===n.status?ct.a.done:""),children:Se[n.status]}),Object(b.jsx)("span",{className:"mb-2 text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(b.jsx)("div",{className:ct.a["item-wrap"],children:s&&n.ingredients.map((function(e){return o.filter((function(t){return t._id===e})).map((function(e){return u+=e.price*("bun"===e.type?2:1),Object(b.jsxs)("div",{className:"mb-4 ".concat(ct.a.ing),children:[Object(b.jsx)("div",{className:ct.a.icon,children:Object(b.jsx)("img",{className:"pl-4 pr-4 mb-1 ".concat(ct.a.image),src:e.image,alt:e.name})}),Object(b.jsx)("div",{className:"mb-2 mr-4 ml-4",children:Object(b.jsx)("span",{className:"text text_type_main-default",children:e.name})}),Object(b.jsxs)("div",{className:"mr-4 ".concat(ct.a.price),children:[Object(b.jsxs)("span",{className:"text text_type_digits-default mr-4 mb-1 price",children:["bun"===e.type?2:1," x ",e.price]})," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]})]},e._id)}))}))}),Object(b.jsxs)("div",{className:"mt-10 ".concat(ct.a.bottom),children:[Object(b.jsx)("span",{className:"text text_type_main-default text_color_inactive ".concat(ct.a.date),children:Ue()(n.createdAt).format("HH:mm:ss d MMM")}),Object(b.jsxs)("span",{className:"text text_type_digits-default mb-1 price",children:[u," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})}):null},it=Object(R.c)("ingredients/fetchIngredients",function(){var e=Object(re.a)(ae.a.mark((function e(t,n){var a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(se+"ingredients");case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ot=Object(R.d)({name:"ingredients",initialState:{entities:[],loading:"idle"},reducers:{},extraReducers:function(e){e.addCase(it.pending,(function(e){e.loading="loading"})),e.addCase(it.fulfilled,(function(e,t){e.entities=t.payload.data,e.loading="idle"})),e.addCase(it.rejected,(function(e){e.loading="idle"}))}}),lt=(ot.reducer,function(){var e=Object(m.g)(),t=g(),n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],s=r[1],o=h((function(e){return e.constructors.items})),d="PUSH"===E.action||"REPLACE"===E.action?e.state&&e.state.background:null,u=function(e){if(void 0!==e&&e.currentTarget.dataset.modaltype&&"Ingredients"===e.currentTarget.dataset.modaltype.toString())void 0!==e.currentTarget.dataset.item&&t($.actions.add(JSON.parse(e.currentTarget.dataset.item))),s(!0);else if(1===o.filter((function(e){return"bun"===e.type})).length){var n=o.map((function(e){return e._id}));t($e(JSON.stringify({ingredients:n}))),s(!0)}},p=function(){c?(s(!1),t($.actions.del())):(E.goBack(),console.log("presIngredientss"))},j=function(e){(c||d)&&"Escape"===e.key&&p()};Object(a.useEffect)((function(){t(it())}),[t]),Object(a.useEffect)((function(){return document.addEventListener("keydown",j),function(){document.removeEventListener("keydown",j)}}));var x=Object(b.jsx)(G,{handleCloseModal:p,children:Object(b.jsx)(X,{})});return Object(b.jsxs)("div",{className:l.a.app,children:[Object(b.jsx)(f,{}),Object(b.jsxs)(m.d,{location:d||e,children:[Object(b.jsxs)(m.b,{path:"/",exact:!0,children:[Object(b.jsx)(Xe.a,{backend:Ve.a,children:Object(b.jsxs)("main",{className:l.a["app-main"],children:[Object(b.jsx)(k,{handleOpenModal:u}),Object(b.jsx)(H,{handleOpenModal:u})]})}),c&&x]}),Object(b.jsx)(De,{path:"/profile/orders/:id",children:Object(b.jsx)(st,{})}),Object(b.jsx)(m.b,{path:"/feed/:id",children:Object(b.jsx)(st,{})}),Object(b.jsx)(m.b,{path:"/login",children:Object(b.jsx)(ge,{})}),Object(b.jsx)(m.b,{path:"/register",children:Object(b.jsx)(Ne,{})}),Object(b.jsx)(m.b,{path:"/forgot-password",children:Object(b.jsx)(Ce,{})}),Object(b.jsx)(m.b,{path:"/reset-password",children:Object(b.jsx)(Me,{})}),Object(b.jsx)(De,{path:"/profile",children:Object(b.jsx)(Ye,{})}),Object(b.jsx)(m.b,{path:"/ingredients/:id",children:Object(b.jsx)(Z,{})}),Object(b.jsx)(m.b,{path:"/feed",exact:!0,children:Object(b.jsx)(nt,{})}),Object(b.jsx)(m.b,{children:Object(b.jsx)(b.Fragment,{})})]}),d&&Object(b.jsx)(m.b,{path:"/ingredients/:id",children:Object(b.jsx)(G,{handleCloseModal:p,children:Object(b.jsx)(Z,{})})}),d&&Object(b.jsx)(m.b,{path:"/feed/:id",children:Object(b.jsx)(G,{handleCloseModal:p,children:Object(b.jsx)(st,{})})}),d&&Object(b.jsx)(De,{path:"/profile/orders/:id",children:Object(b.jsx)(G,{handleCloseModal:p,children:Object(b.jsx)(st,{})})})]})}),dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,218)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},ut=n(16),pt=n(43),mt=n(107),jt={status:Ie.OFFLINE,connectionError:"",orders:null,total:0,totalToday:0},bt=Object(R.d)({name:"orderslist",initialState:jt,reducers:{wsOpen:function(e){e.status=Ie.ONLINE},wsClose:function(e){e.status=Ie.OFFLINE},wsMessage:function(e,t){e.orders=t.payload.orders,e.total=t.payload.total,e.totalToday=t.payload.totalToday},wsError:function(e,t){e.status=Ie.ONLINE,e.connectionError=t.payload,e.orders=null,e.total=0,e.totalToday=0}}}),ft=bt.actions,xt=bt.reducer,_t=Object(ut.b)({ingredients:ot.reducer,constructors:z.reducer,current:$.reducer,order:Qe.reducer,user:_e.reducer,router:Object(pt.b)(E),orders:xt}),Ot=ft.wsOpen,ht=ft.wsClose,gt=ft.wsMessage,yt=ft.wsError,vt=(at={wsConnect:Ke,wsDisconnect:We,onOpen:Ot,onClose:ht,onError:yt,onMessage:gt},function(e){var t=null;return function(n){return function(a){var r=e.dispatch,c=a.payload,s=at.wsConnect,i=at.wsDisconnect,o=at.wsSendMessage,l=at.onOpen,d=at.onClose,u=at.onError,p=at.onMessage;console.log(a),s.match(a)&&(console.log("connect"),t=new WebSocket(c)),t&&(t.onopen=function(e){console.log("open"),r(l())},t.onerror=function(e){console.log("error"),r(u("WebSocket error observed:"+e))},t.onmessage=function(e){console.log("message");var t=e.data,n=JSON.parse(t);r(p(n))},t.onclose=function(e){console.log("close"),r(d())},(null===o||void 0===o?void 0:o.match(a))&&t.send(JSON.stringify(c)),i.match(a)&&t.close()),n(a)}}}),Nt=Object(R.a)({reducer:_t,middleware:function(e){return e().concat(vt).concat(Object(mt.a)(E))},devTools:!1});Nt.dispatch(xe()),s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(O.a,{store:Nt,children:Object(b.jsx)(pt.a,{history:E,children:Object(b.jsx)(lt,{})})})}),document.getElementById("root")),dt()},24:function(e,t,n){e.exports={wrap:"profile_wrap__1ySMC",form:"profile_form__1yxrZ",link:"profile_link__1-_Is",side:"profile_side__20RY3",nav:"profile_nav__1tnk2",active:"profile_active__4c5X0",button:"profile_button__38wGI profile_link__1-_Is",page:"profile_page__1Cs8x"}},25:function(e,t,n){e.exports={wrap:"order_wrap__B3c9K",order:"order_order__3S06G",center:"order_center__1a6jg",done:"order_done__1EPcy","item-wrap":"order_item-wrap__2waql",icon:"order_icon__1d17d",image:"order_image__5-GwK",ing:"order_ing__2m4UQ",bottom:"order_bottom__3pi7O",price:"order_price__ojCD8"}},28:function(e,t,n){e.exports={ingredients:"burger-ingredients_ingredients__2TY9H",tab:"burger-ingredients_tab__1Ru1Z","item-wrap":"burger-ingredients_item-wrap__2danH","item-subwrap":"burger-ingredients_item-subwrap__g2elM",items:"burger-ingredients_items__ff6d6",item:"burger-ingredients_item__3x5fV"}},29:function(e,t,n){e.exports={wrap:"ingredient-details_wrap__24h0P",list:"ingredient-details_list__2aOfA",img:"ingredient-details_img__1nPTJ",name:"ingredient-details_name__3OKTo",item:"ingredient-details_item__2m5b9",header:"ingredient-details_header__2JP_g"}},30:function(e,t,n){e.exports={item:"orders-list-item_item__363f8",link:"orders-list-item_link__1LzKK",icon:"orders-list-item_icon__1Mjv2",image:"orders-list-item_image__2hvBr",wrap:"orders-list-item_wrap__2vYgG",date:"orders-list-item_date__2CBDY",block:"orders-list-item_block__23CTK",done:"orders-list-item_done__3JoM1"}},39:function(e,t,n){e.exports={header:"app-header_header__1iHLW",nav:"app-header_nav__1_idE app-header_header__1iHLW","nav-item":"app-header_nav-item__2nTkN app-header_header__1iHLW"}},40:function(e,t,n){e.exports={flex:"feed_flex__1sWFG",flexc:"feed_flexc__qk3dU",info:"feed_info__1VRyk",form:"feed_form__2anBy",link:"feed_link__6qN0u",side:"feed_side__1Ce22",nav:"feed_nav__28Caq",active:"feed_active__1IOED",button:"feed_button__2uurG feed_link__6qN0u",done:"feed_done__i9bek"}},47:function(e,t,n){e.exports={ingredients:"burger-construction_ingredients__2ATvb","item-wrap":"burger-construction_item-wrap__2kPKs","total-price":"burger-construction_total-price__35MqF",total:"burger-construction_total__IGKwT"}},48:function(e,t,n){e.exports={wrap:"login_wrap__HcOkz",link:"login_link__3E_sF",form:"login_form__2rWWY"}},49:function(e,t,n){e.exports={orders:"orders-list_orders__7Am4h",tab:"orders-list_tab__3tZVm","item-wrap":"orders-list_item-wrap__3n7q1","item-subwrap":"orders-list_item-subwrap__Wjwex",items:"orders-list_items__SfQgk",item:"orders-list_item__3XIIt"}},56:function(e,t,n){e.exports={wrap:"order-details_wrap__3mcNe",text:"order-details_text__ZLZ7C"}},57:function(e,t,n){e.exports={wrap:"register_wrap__1CHrU",link:"register_link__1uCnB",form:"register_form__2dthx"}},58:function(e,t,n){e.exports={wrap:"forgot-password_wrap__2PBHe",link:"forgot-password_link__KBp77",form:"forgot-password_form__1u9xp"}},59:function(e,t,n){e.exports={wrap:"reset-password_wrap__2IMej",link:"reset-password_link__6i358",form:"reset-password_form__3zpXn"}},80:function(e,t,n){e.exports={app:"app_app__M9MMq","app-main":"app_app-main__10VMB"}},82:function(e,t,n){e.exports={item:"ingredients-item_item__7IEd2",link:"ingredients-item_link__1-Rdf"}},84:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r"}}},[[210,1,2]]]);
//# sourceMappingURL=main.8b01ee24.chunk.js.map